<!DOCTYPE html>
<html>
  <body>
    <h2>Edit File Content</h2>
    <textarea id="editor" rows="20" cols="80">Loading...</textarea><br>
    <button onclick="saveToGitHub()">Save to GitHub</button>

<script>
  function saveToGitHub() {
    const content = document.getElementById("editor").value;

    fetch("/.netlify/functions/save", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content })
    })
    .then(res => res.json())
    .then(data => {
      alert("Saved!");
      
      // Create download links
      if (data.links && data.links.length > 0) {
        data.links.forEach(link => {
          const a = document.createElement("a");
          a.href = link.url;
          a.target = "_blank";
          a.textContent = `Download ${link.name}`;
          a.style.display = "block";
          document.body.appendChild(a);
        });
      }
    })
    .catch(err => alert("Error: " + err));
  }
</script>
  </body>
</html>
